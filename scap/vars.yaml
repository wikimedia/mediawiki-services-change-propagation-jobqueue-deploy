# log-related variables
log_name: cpjobqueue
logstash_host: localhost
logstash_port: 12201
log_file: /tmp/cpjq.log
# metrics
metrics_name: cpjobqueue
metrics_host: localhost
metrics_port: 8252
# service
name: cpjobqueue
port: 7200
proxy:
site: datacenter1
broker_list: localhost:9092
jobrunner_uri: http://localhost/rpc/RunSingleJob.php
videoscaler_uri: http://localhost/rpc/RunSingleJob.php
concurrency: 30
redis_path: /var/run/redis.sock
redis_pass:
env: production
kafka_max_bytes: 4194304
kafka_compression_codec: snappy
high_traffic_jobs_config:
  categoryMembershipChange: {}
  cdnPurge: {}
  EchoNotificationDeleteJob: {}
  htmlCacheUpdate:
    # The avg exec time of the job is 60ms
    # so this gives us 150 jobs/s - 3 times the avg rate
    concurrency: 10
  ORESFetchScoreJob: {}
  recentChangesUpdate: {}
  RecordLintJob:
    concurrency: 100
    consumer_batch_size: 10
  refreshLinksDynamic: {}
  refreshLinksPrioritized: {}
  wikibase-addUsagesForPage: {}
  wikibase-InjectRCRecords: {}
  # For cirrus search jobs the retries are built into the job itself,
  # so disable the retries by changeprop.
  cirrusSearchCheckerJob:
    disable_delayed_execution: true #T198462
    retry_limit: 0
    concurrency: 10
  cirrusSearchDeleteArchive:
    retry_limit: 0
  cirrusSearchDeletePages:
    retry_limit: 0
  cirrusSearchElasticaWrite:
    reenqueue_delay: 3600
    retry_limit: 0
  cirrusSearchIncomingLinkCount:
    retry_limit: 0
    concurrency: 50
  cirrusSearchLinksUpdate:
    retry_limit: 0
  cirrusSearchLinksUpdatePrioritized:
    retry_limit: 0
    concurrency: 150 # Avg. rate 150, Avg. exec time 0.7s
  cirrusSearchOtherIndex:
    retry_limit: 0
videoscaler_jobs_config:
  webVideoTranscode:
    timeout: 86400000
  webVideoTranscodePrioritized:
    timeout: 86400000

